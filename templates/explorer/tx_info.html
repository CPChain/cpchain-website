{% extends 'base.html' %}
{% load static %}
{% block custom_head %}
    <link rel="stylesheet" href="/static/css/explorer.css" content="text/css">
    <link rel="stylesheet" href="/static/css/reset.css" content="text/css">
    <link href="https://cdn.bootcss.com/jquery.perfect-scrollbar/1.4.0/css/perfect-scrollbar.min.css" rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="/static/js/util.js"></script>

{% endblock %}
{% block title %}
    <title>Transaction Infomation &#8211; CPChain</title>
{% endblock %}
{% block content %}
    <body class="page-template-news">
    {% include "explorer/_searchbar.html" %}

    <div class="container">
        <div class="page-header">
            <div class="page-header-main">
                <p class="text-center poppins-font">Transaction Information</p>
            </div>
        </div>
    </div>

    <div class="container poppins-font">
        <div class="info-table px-md-5" id="tx-info">
            <div class="row info-id">
                <span class="info-id-icon"><img src="{% static 'img/explorer/transaction info icon.png' %}"
                                                alt=""></span>
                <span class="col info-id-serial" style="top: 4px;">{{ tx_dict.hash }}</span>
            </div>
            <div class="row info-row">
                <div class="col-3">TxHash:</div>
                <div class="col poppins-light">{{ tx_dict.hash }}</div>
            </div>
            <div class="row info-row">
                <div class="col-3">TxReceipt Status:</div>
                <div class="col rc-status">
                    {% ifequal tx_dict.status 1 %}
                        <span class="rc-success">Success</span>
                    {% else %}
                        <span class="rc-fail'">Fail</span>
                    {% endifequal %}
                </div>
            </div>
            <div class="row info-row">
                <div class="col-3">Block Height:</div>
                <div class="col poppins-light"><a
                        href="{% url 'explorer:block' tx_dict.blockNumber %}">{{ tx_dict.blockNumber }}</a>
                </div>
            </div>
            <div class="row info-row">
                <div class="col-3">Time:</div>
                <div class="col poppins-light">[[ timeTicker ]] ago</div>
            </div>
            <div class="row info-row">
                <div class="col-3">From:</div>
                <div class="col poppins-light"><a
                        href="{% url 'explorer:address' tx_dict.from %}">{{ tx_dict.from }}</a></div>
            </div>
            <div class="row info-row">
                <div class="col-3">To:</div>
                <div class="col poppins-light">
                    {% if tx_dict.to %}
                        <a href="{% url 'explorer:address' tx_dict.to %}">{{ tx_dict.to }}</a>
                    {% else %}
                        <a href="#">Contract Creation</a>
                    {% endif %}
                </div>
            </div>
            <div class="row info-row">
                <div class="col-3">Value:</div>
                <div class="col poppins-light">{{ tx_dict.value }}</div>
            </div>
            <div class="row info-row">
                <div class="col-3">Gas Used By Transaction:</div>
                <div class="col poppins-light">{{ tx_dict.gas }}</div>
            </div>
            <div class="row info-row">
                <div class="col-3">Gas Limit:</div>
                <div class="col poppins-light">{{ tx_dict.gasLimit }}</div>
            </div>
            <div class="row info-row">
                <div class="col-3">Gas Price:</div>
                <div class="col poppins-light">{{ tx_dict.gasPrice }} CPC</div>
            </div>
            <div class="row info-row">
                <div class="col-3">Actual Tx Cost/Fee:</div>
                <div class="col poppins-light">{{ tx_dict.txfee }} CPC</div>
            </div>
            <div class="row info-row">
                <div class="col-3">Input Data:</div>
                <div class="col-9">
                    <div class="raw-data-container">
                        <div class="raw-data-content">
                            {{ tx_dict.input }}
                        </div>
                        {#                        <div class="raw-data-type-form">#}
                        {#                            <div class="form-check-inline form-check" @click="toggleDataType(0)">#}
                        {#                                <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1"#}
                        {#                                       value="option1" checked>#}
                        {#                                <label class="form-check-label" for="inlineRadio1">Default View</label>#}
                        {#                            </div>#}
                        {#                            <div class="form-check-inline form-check" @click="toggleDataType(1)">#}
                        {#                                <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1"#}
                        {#                                       value="option1">#}
                        {#                                <label class="form-check-label" for="inlineRadio1">Origin</label>#}
                        {#                            </div>#}
                        {#                        </div>#}
                    </div>
                </div>
            </div>
            <div class="row info-row"></div>
        </div>
    </div>
    <script src="https://cdn.bootcss.com/jquery.perfect-scrollbar/1.4.0/perfect-scrollbar.min.js"></script>

    <script>
        var txInfoApp = new Vue({
            el: '#tx-info',
            delimiters: [`[[`, `]]`],
            computed: {
                timeTicker: function () {
                    var cts = parseInt((Date.now() + 500) / 1000)
                    return `${convertDate({{tx_dict.timestamp | safe}})}` + ' ' + formatTS(cts -{{ tx_dict.timestamp}})
                },
            },
            // methods: {
            //     toggleDataType: function (type) {
//
            //              }
            //        }
        })
        var ps = new PerfectScrollbar('.raw-data-content')
    </script>
    </body>
{% endblock %}