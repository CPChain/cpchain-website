{% extends 'base.html' %}
{% load static %}
{% load i18n %}
{% block custom_head %}
<link rel="stylesheet" href="/static/css/explorer.css" content="text/css">

<link href="https://cdn.bootcss.com/jquery.perfect-scrollbar/1.4.0/css/perfect-scrollbar.min.css" rel="stylesheet">
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="shortcut icon" href="{% static '/img/favicon.ico' %}" />
<link rel="stylesheet" href="{% static '/css/all.css' %}">
<link rel="stylesheet" href="{% static '/css/swiper.css' %}">
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,600,700,800,900|Source+Sans+Pro:400,600,700,900"
    rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Poppins' rel='stylesheet'>
{% endblock %}
{% block title %}
<title>Proposals &#8211; CPChain</title>
{% endblock %}
{% block content %}
<style>
    .proposal-container {
        display: flex;
        flex-direction: row;
       
        overflow: hidden;
        margin-top: 10px;
        margin-bottom: 10px;
        flex-wrap: wrap;
        align-content: flex-start;
        align-items:flex-start;;
        justify-content: flex-start;
    }
 
    .card {
        width: 270px;
        height: 370px;
        margin: 0 10px;
        position: relative;
        padding: 25px 0;
        margin-bottom: 50px;

        align-items: center;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;

        box-shadow: rgba(48, 82, 120, 0.1) 0 0 9px;
    }

    .title {
        font-size: 1.25rem;
        color: #2e3550;
        letter-spacing: -.34px;
        text-align: center;

        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 2;
        padding: 0 10px;
    }


    .type {
        font-size: 1rem;
        color: #a4aab4;
        letter-spacing: -.48px;
        text-align: center;
        margin-top: 20px;
        margin-bottom: 20px;
    }

    .desc {
        font-size: 1rem;
        color: #737d8e;
        letter-spacing: -.27px;
        text-align: center;
        height: 4.6rem;
        box-sizing: border-box;
        padding: 0 10px;
        margin-bottom: 2.65rem;
        line-height: 1.2rem;
        overflow-y: auto;
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 4;
    }

    .btn_link{
        display: block;
        width: 18.5rem;
        height: 3.125rem;
        border: 1px solid #abaeb6;
        border-radius: 8px;
        font-size: 1rem;
        color: #2e3550;
        text-align: center;
        line-height:  3.125rem;
        cursor: pointer;
    }

    .more_btn {
        display: block;
        width: 8.5rem;
        height: 2.125rem;
        border: 1px solid #abaeb6;
        border-radius: 3px;
        font-size: .875rem;
        color: #2e3550;
        text-align: center;
        line-height: 2.125rem;
        cursor: pointer;
    }
</style>

<body
    class="page-template page-template-news page-template-news-php page page-id-15 language-en has-header-image page-two-column colors-light">

    <section class="section-seven py-sm-5 py-0 ">
        <div class="container py-sm-5 py-0">
            <div class="row flex-row align-items-center py-5">

                <div class="left-side col-xl-6 col-md-6 col-sm-12">
                    <div class="left-side-holder col-xl-10 col-md-10 col-sm-12 px-0">
                        <h2 class="poppins-font">{% blocktrans %}Create a proposal for CPChain
                            ecosystem{% endblocktrans %}</h2>
                        <hr class="right-hr w-100 ml-0">
                        <p style="color: #305278;font-family: 'Poppins';line-height: 30px;">
                            {% blocktrans %}Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean euismod
                            bibendum laoreet. Proin gravida dolor sit amet lacus accumsan et viverra justo commodo.
                            Proin sodales pulvinar sic tempor. Sociis natoque penatibus et magnis dis parturient montes,
                            nascetur ridiculus mus. Nam fermentum, nulla luctus pharetra vulputate, felis tellus mollis
                            orci, sed rhoncus pronin sapien nunc accuan eget.{% endblocktrans %}
                        </p>
                    </div>
                </div>
                <div
                    class="right-side col-xl-6 col-lg-6 col-md-6 col-sm-12 d-flex flex-column align-items-end justify-content-between py-5 py-sm-0">
                    <div class="right-side-holder col-xl-9 col-md-9 col-lg-9 col-sm-12 px-0">

                        <div class="item d-flex flex-row mb-5">
                            <!-- <div class="left-side">
                                <div class="image-holder mr-4">
                                    <img src="{% static '/img/Icons/artificial.png' %}"
                                        class="d-block disable-select w-100"
                                        alt="Artificial intelligence decisions - CPChain">
                                </div>
                            </div> -->
                            <div class="right-side d-flex flex-column align-items-start justify-content-center">
                                <a class="btn_link" href="create" >
                                    {% blocktrans %}Propose{% endblocktrans %}</a>
                               
                            </div>
                        </div>
                        <div class="item d-flex flex-row">
                         
                            <div class="right-side d-flex flex-column align-items-start justify-content-center">
                                <a class="btn_link"  href="congress">
                                    {% blocktrans %}Community Congress{% endblocktrans %}</a>
                                 
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <div class="container" id="proposal-list" style="margin-bottom: 120px">

        <div class="col-12 col-lg-12 ">
            <div class="table-header">
                <div class="table-header-main">Submitted Proposals</div>
                <div class="table-header-sub card-link"><a href="list/submitted">See all</a></div>
            </div>
            <div class="    proposal-container">
                <div class="card table-item  " v-for="proposal in Submitted" :key="proposal.proposal_id">
                    <p class="title">[[proposal.title]] </p>
                    <p class="type">[[typeName(proposal.proposal_type)]]</p>
                    <p class="desc">[[proposal.description]]</p>
                    <a :href="'detail/'+proposal.proposal_id" class="more_btn"><span>Detail</span></a>
                </div>
            </div>

        </div>
        <div class="col-12 col-lg-12">
            <div class="table-header">
                <div class="table-header-main">Deposited Proposals</div>
                <div class="table-header-sub card-link"><a href="list/deposited">See all</a></div>
            </div>
            <div class="     proposal-container">
                <div class="card table-item  " v-for="proposal in Deposited" :key="proposal.proposal_id">
                    <p class="title">[[proposal.title]] </p>
                    <p class="type">[[typeName(proposal.proposal_type)]]</p>
                    <p class="desc">[[proposal.description]]</p> 
                    <a :href="'detail/'+proposal.proposal_id" class="more_btn"><span>Detail</span></a>
                </div>
               
            </div>
        </div>
        <div class="col-12 col-lg-12">
            <div class="table-header">
                <div class="table-header-main">Community Congress Proposals</div>
                <div class="table-header-sub card-link"><a href="list/community congress">See all</a></div>
            </div>
            <div class="   proposal-container">
                <div class="card table-item  " v-for="proposal in Community" :key="proposal.proposal_id">
                    <p class="title">[[proposal.title]] </p>
                    <p class="type">[[typeName(proposal.proposal_type)]]</p>
                    <p class="desc">[[proposal.description]]</p>
                    <a :href="'detail/'+proposal.proposal_id" class="more_btn"><span>Detail</span></a>
                </div>
            </div>
        </div>
        <div class="col-12 col-lg-12">
            <div class="table-header">
                <div class="table-header-main">Decision Congress Proposals</div>
                <div class="table-header-sub card-link"><a href="list/decision congress">See all</a></div>
            </div>
            <div class="    proposal-container">
                <div class="card table-item  " v-for="proposal in Decision" :key="proposal.proposal_id">
                    <p class="title">[[proposal.title]] </p>
                    <p class="type">[[typeName(proposal.proposal_type)]]</p>
                    <p class="desc">[[proposal.description]]</p>
                    <a :href="'detail/'+proposal.proposal_id" class="more_btn"><span>Detail</span></a>
                </div>
            </div>
        </div>
        <div class="col-12 col-lg-12">
            <div class="table-header">
                <div class="table-header-main">Expired Proposals</div>
                <div class="table-header-sub card-link"><a href="list/expired">See all</a></div>
            </div>
            <div class="   proposal-container">
                <div class="card table-item  " v-for="proposal in Expired" :key="proposal.proposal_id">
                    <p class="title">[[proposal.title]] </p>
                    <p class="type">[[typeName(proposal.proposal_type)]]</p>
                    <p class="desc">[[proposal.description]]</p>
                    <a :href="'detail/'+proposal.proposal_id" class="more_btn"><span>Detail</span></a>
                </div>
            </div>
        </div>

    </div>

    <script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
    <script src="https://cdn.bootcss.com/jquery.perfect-scrollbar/1.4.0/perfect-scrollbar.min.js"></script>


    <script>

        const serverUrl = 'https://test.yourserverless.site/'
        const fetchJson = (url) => {
            return fetch(url,
                {
                    method: 'GET',
                    mode: 'cors',
                    headers: {
                        'Content-Type': 'application/json',
                        'accept': 'application/json',
                    }
                }).then(res => res.json())
        }


        var listApp = new Vue({
            el: '#proposal-list',
            delimiters: [`[[`, `]]`],
            data: {
                Submitted: [],
                Deposited: [],
                Community: [],
                Decision: [],
                Expired: [],
                types: []
            },
            methods: {
                typeName: (id) => {
                    let obj = listApp.$data.types.find(p=>p.id==id)
                    if (!obj ) return ''
                    if (window.location.pathname.startsWith('/zh-hans')) {
                        return obj.zh
                    } else {
                        return obj.en
                    }
                      
                },
                initData: () => {
                    fetchJson(`${serverUrl}community-manage/proposal-type/`).then(types => {
          
                        listApp.$data.types = types.results  
                    })

                    fetchJson(`${serverUrl}community-manage/proposals/?limit=3&offset=0&status=submitted`).then(res => {
                        
                        listApp.$data.Submitted = res.results 
                    })
                    fetchJson(`${serverUrl}community-manage/proposals/?limit=3&offset=0&status=submitted`).then(res => {
                        
                        listApp.$data.Submitted = res.results
                    })
                    fetchJson(`${serverUrl}community-manage/proposals/?limit=3&offset=0&status=deposited`).then(res => {
                        
                        listApp.$data.Deposited = res.results
                    })
                    fetchJson(`${serverUrl}community-manage/proposals/?limit=3&offset=0&status=` + encodeURI('community congress')).then(res => {
                        
                        listApp.$data.Community = res.results
                    })
                    fetchJson(`${serverUrl}community-manage/proposals/?limit=3&offset=0&status=` + encodeURI('decision congress')).then(res => {
                        
                        listApp.$data.Decision = res.results
                    })
                    fetchJson(`${serverUrl}community-manage/proposals/?limit=3&offset=0&status=expired`).then(res => {
                        
                        listApp.$data.Expired = res.results
                    })

                }
            },
            created() {
                this.initData()
            }
        })







    </script>

</body>
{% endblock %}