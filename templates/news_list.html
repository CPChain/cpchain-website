{% extends 'base.html' %}
{% load staticfiles %}
{% block content %}
    <script>(function (html) {
        html.className = html.className.replace(/\bno-js\b/, 'js')
    })(document.documentElement);</script>

    <style type="text/css">
        .recentcomments a {
            display: inline !important;
            padding: 0 !important;
            margin: 0 !important;
        }

        .pageturn {
            height: 70px;
            margin-top: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .pagelist {
            height: 70px;
            overflow: hidden;
            border-radius: 5px;
            color: #1BA3FF;
            font-size: 18px;
        }
        .pagelist a{
            color: #1BA3FF;
        }
        .pagelist li {
            list-style: none;
            float: left;
            padding: 3px 12px;
            margin-left: 4px;
        }

        .pagelist li:hover{
            background-color: white !important;
            border-radius: 50% !important;
            box-shadow: 0px 9px 19px rgba(0, 0, 0, 0.05) !important;
        }
    </style>


    <body class="archive category category-community-updates category-2 language-en hfeed has-header-image has-sidebar page-two-column colors-light">
    <div id="page" class="site">

        <header class="py-4 mx-auto w-100 " id="header">
            <div class="container">
                <div class="row">
                    <div class="col-4 d-flex flex-row align-items-center">
                        <a href="https://cpchain.io" class="logo-hov">
                            <div class="image-header-holder d-flex flex-row align-items-center justify-content-start">
                                <img src="https://cpchain.io/wp-content/themes/cpchain/assets/img/logo_new.svg"
                                     class="disable-select">
                            </div>
                        </a>
                    </div>

                    <div class="menu col-8 d-flex align-items-center justify-content-end">

                        <ul class="list-unstyled mainul flex-column flex-sm-row sidenav d-flex align-items-xl-center justify-content-xl-between align-items-md-center justify-content-md-between align-items-lg-center justify-content-lg-between align-items-sm-center justify-content-sm-between align-items-start justify-content-start w-100 mb-0"
                            id="mySidenav">

                            <li class="d-sm-none d-block w-100">
                                <a href="javascript:void(0);" class="closebtn text-right p-0" onclick="openMenu(0)">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                        <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"
                                              fill="#fff"/>
                                    </svg>
                                </a>
                            </li>
                            <li>
                                <a href="https://cpchain.io#application" class="font-weight-bold" onclick="openMenu(0)">
                                    Application
                                </a>
                            </li>
                            <li>
                                <a href="https://cpchain.io#roadmap" class="font-weight-bold" onclick="openMenu(0)">
                                    Roadmap
                                </a>
                            </li>
                            <li>
                                <a href="https://cpchain.io#team" class="font-weight-bold" onclick="openMenu(0)">
                                    Team
                                </a>
                            </li>
                            <li>
                                <a href="https://cpchain.io/news" class="font-weight-bold" onclick="openMenu(0)">
                                    News
                                </a>
                            </li>
                            <li>
                                <a href="https://cpchain.io#vision" class="font-weight-bold" onclick="openMenu(0)">
                                    Partners
                                </a>
                            </li>
                            <li>
                                <a href="https://cpchain.io/rnodes" class="font-weight-bold">
                                    RNode
                                </a>
                            </li>
                            <li>
                                <a href="https://cpchain.io#contact" class="font-weight-bold" onclick="openMenu(0)">
                                    Contact
                                </a>
                            </li>


                            <li class="line"></li>

                            <li class="dropdown bg-transparent">
                                <div class="dropdown-holder d-flex flex-row align-items-center justify-content-center">
                                    <a class="dropbtn-links p-0 small font-weight-bold d-none d-sm-block">
                                        ENG </a>
                                    <div class="image-holder d-flex align-items-center justify-content-center">
                                        <svg height="24px" class="d-none d-sm-block"
                                             id="723dc0ec-7619-4a51-9a43-c524926a5ebc" data-name="drop_down_arrow"
                                             xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                             viewBox="0 0 24 24">
                                            <g opacity="0.4">
                                                <path d="M7,10l5,5,5-5Z" fill="#305278"/>
                                                <path d="M0,0H24V24H0Z" fill="none"/>
                                            </g>
                                        </svg>
                                    </div>
                                    <ul class="dropdown-menu list-unstyled rounded">
                                        <a href="https://cpchain.io" class="small">ENG</a>
                                        <a href="https://cpchain.io/zh" class="small">中文</a>
                                    </ul>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="col-8 menuopen position-absolute d-flex justify-content-end align-items-center">
                        <a onclick="openMenu(1)"><i class="fas fa-bars d-block d-sm-none"></i></a>
                    </div>
                </div>
            </div>
        </header> <!-- header -->

        <div class="site-content-contain">
            <div id="content" class="site-content">

                <section
                        class="search-bar h-75 d-flex align-items-center justify-content-center position-relative bg-light">
                    <div class="container">
                        <div class="row my-2 py-3">

                            <div class="col-12 px-0">
                                <div class="navbar navbar-light d-flex flex-column flex-sm-row justify-content-between align-items-center flex-row w-100">
                                    <a class="navbar-brand col-sm-6 col-12 mb-4 mb-sm-0">
                                        <h6 class="m-0">Official CPChain Media</h6>
                                    </a>
                                    <form class="form-inline col-sm-6 col-12 d-flex align-items-center justify-content-end"
                                          action="https://cpchain.io">
                                        <input class="form-control col-sm-10 col-12 mr-sm-2" name="s" type="search"
                                               placeholder="Search" aria-label="Search">
                                    </form>
                                </div>
                            </div>

                        </div>
                    </div>
                </section> <!-- end of search bar -->

                <section class="section-category py-5 d-flex align-items-center justify-content-center">
                    <div class="container h-100">
                        <div class="row">

                            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 mx-auto">
                                <h3 class="text-center w-100 my-3">
                                    Category: {{ category }} </h3>
                            </div>

                            <div class="col-12 col-sm-12 mt-4">
                                <hr class="middle-hr">
                            </div>
                        </div>

                        {# 新闻列表#}
                        <div class="row">
                            {# 循环体#}
                            {% for n in news.object_list %}
                                <div class="card blog border-0 col-sm-4  my-4">


                                    <a href="{% url 'news_detail' n.title|urlencode %}">
                                        <div class="image-holder position-relative">
                                            <img width="800" height="400"
                                                 src="{{ MEDIA_URL }}{{ n.banner }}"
                                                 class="d-block w-100 h-100 img-fluid disable-select wp-post-image"
                                                 alt=""
                                                 sizes="(max-width: 767px) 89vw, (max-width: 1000px) 54vw, (max-width: 1071px) 543px, 580px"/>
                                        </div>
                                    </a>

                                    <div class="card-body px-0 pb-0">

                                        <h6 class="card-title text-primary news">
                                            <a href="{% url 'news_detail' n.title|urlencode %}"
                                               class="text-primary small">
                                                {{ category }} </a>
                                        </h6>
                                        <h5 class="card-title">
                                            <a href="{% url 'news_detail' n.title|urlencode %}">
                                                {{ n.title }} </a>
                                        </h5>

                                        <p class="card-text">
                                            {{ n.content|slice:":200"|safe }}...</p>
                                        <div class="card border-0 d-flex flex-row ml-0 w-100">
                                            <a href="{% url 'news_detail' n.title|urlencode %}">
                                                <div class="image-smaller-holder">
                                                    <img class="card-img-top bottom-cards disable-select h-100"
                                                         src="https://cpchain.io/wp-content/themes/cpchain/assets/img/logo.svg"
                                                         alt="Card image cap">
                                                </div>
                                            </a>
                                            <div class="card-body py-0 d-flex align-items-center">
                                                <p class="card-text card-bottom-text">
                                                    <a href="{% url 'news_detail' n.title|urlencode %}">
                                                        CPChain </a>
                                                    <br> {{ n.update_time }} </p>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            {% endfor %}


                            {# 循环体#}

                        </div>
                        {# 新闻列表#}

                        {#分页器#}
                        <div class="pageturn .clear">
                            <div class="pagelist">

                                {% if news.has_previous %}
                                    <li><a href=" ">Last page</a></li>
                                {% endif %}
                                {% for page in news.pages %}
                                    {% if page %}
                                        {% ifequal page news.number %}
                                            <li><a style="color: #305278;" href="?{{ page.querystring }}">Page{{ page }}</a></li>
                                        {% else %}
                                            <li><a href="?{{ page.querystring }}">Page{{ page }}</a></li>
                                        {% endifequal %}
                                    {% else %}
                                        <li><a href="">...</a></li>
                                    {% endif %}
                                {% endfor %}
                                {% if news.has_next %}
                                    <li><a href="?{{ news.next_page_number.querystring }}">Next page</a>
                                    </li>
                                {% endif %}
                            </div>
                        </div>
                        {#分页器#}

                    </div>
                </section>


            </div><!-- #content -->


        </div><!-- .site-content-contain -->
    </div><!-- #page -->

    <script type='text/javascript' src="{% static '/js/skip-link-focus-fix.js' %}"></script>
    <script type='text/javascript' src="{% static '/js/wp-embed.min.js' %}"></script>

    <script src="{% static '/js/swiper.min.js' %}"></script>
    <script src="{% static '/js/vanilla-tilt.min.js' %}"></script>

    <script>

        let header = document.getElementById('header');
        window.addEventListener('scroll', function (e) {
            (window.scrollY > 30) ? header.classList.add('active') : header.classList.remove('active');
        });

        //Navigation
        let anchorlinks = document.querySelectorAll('a[href^="#"]');
        for (let item of anchorlinks) {
            item.addEventListener('click', (e) => {

                for (let i of anchorlinks) {
                    (i.textContent != item.textContent) ? i.classList.remove('selected') : i.classList.add('selected');
                }

                let hashval = item.getAttribute('href');
                let target = document.querySelector(hashval)
                target.scrollIntoView({
                    behavior: 'smooth'
                });
                history.pushState(null, null, hashval);
                e.preventDefault();
                openMenu(0);
            });
        }


        function openMenu(type) {
            let menuHolder = document.getElementById('mySidenav');
            (type == 1) ? menuHolder.classList.add('col-8', 'active') : menuHolder.classList.remove('col-8', 'active');
        }

        function myFunction() {
            document.getElementById("myDropdown").classList.toggle("show");
        }

        // swiper for application pages
        var swiperTeam = new Swiper('.swiper-container-applications', {
            slidesPerView: 1,
            autoplay: false,
            grabCursor: false,
            allowTouchMove: false,
            autoHeight: true,
        });

        swiperTeam.on('slideChange', function () {
            // change active image
            let currentSlide = this.activeIndex;
        });

        function goToApplicationSwiper(index, e) {
            swiperTeam.slideTo(index, 200);
        }

    </script>

    </body>
{% endblock %}
